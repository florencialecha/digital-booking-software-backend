variables:
  JAR_NAME: back.jar
  JAR_FOLDER: /home/ubuntu/jarFolder


stages:
  - build
  - deploy

build:
  stage: build
  script:
    - cd back
    - mvn clean package
  tags:
    - back

deploy:
  stage: deploy
  script:
    - pwd
    - JAR_FILE=$(find back/out/artifacts/back_jar/ -name "*.jar" | head -n 1)
    - cd ~
    - cd ..
    - cd ubuntu

    - sudo rm -r /jarFolder/*
    - sudo cp -r $JAR_FILE jarFolder/
    - sudo systemctl restart ApiBack.service
  tags:
    - back
