stages:
  - deploy

deploy:
  stage: deploy
  variables:
    SSH_PRIVATE_KEY: $YOUR_PRIVATE_KEY
  before_script:
    - echo "$SSH_PRIVATE_KEY" | tr -d '\r' > /tmp/deploy_key
    - chmod 600 /tmp/deploy_key
    - eval "$(ssh-agent -s)"
    - ssh-add /tmp/deploy_key
  script:
    - ssh ubuntu@<YOUR_EC2_INSTANCE_IP> "echo 'Hello from GitLab CI/CD!'"
  tags:
    - <ApiBack>
