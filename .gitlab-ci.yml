

stages:
  - BuildAndDeployFront
  - BuildAndDeployBack

BuildAndDeployBack:
  stage: BuildAndDeployBack
  script:
    - cd back
    - sudo mvn clean package
    - sudo systemctl restart ApiBack.service

  tags:
    - back


BuildAndDeployFront:
  stage: BuildAndDeployFront
  script:
    - cd frontend/PI_G6
    - sudo npm-clean
    - sudo npm install
    - sudo npm run build
    - aws s3 sync /dist s3://digital-booking-6 --delete
    - sudo rm -rf node_modules



  tags:
    - front

